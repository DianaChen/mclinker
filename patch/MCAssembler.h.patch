diff --git a/include/llvm/MC/MCAssembler.h b/include/llvm/MC/MCAssembler.h
index fc91966..07960d4 100644
--- a/include/llvm/MC/MCAssembler.h
+++ b/include/llvm/MC/MCAssembler.h
@@ -18,6 +18,7 @@
 #include "llvm/Support/Casting.h"
 #include "llvm/MC/MCFixup.h"
 #include "llvm/MC/MCInst.h"
+#include "llvm/MC/MCObjectWriter.h"   // Nowar: for delete
 #include "llvm/Support/DataTypes.h"
 #include <vector> // FIXME: Shouldn't be needed.
 
@@ -30,7 +31,6 @@ class MCContext;
 class MCCodeEmitter;
 class MCExpr;
 class MCFragment;
-class MCObjectWriter;
 class MCSection;
 class MCSectionData;
 class MCSymbol;
@@ -664,7 +664,7 @@ private:
 
   MCCodeEmitter &Emitter;
 
-  MCObjectWriter &Writer;
+  MCObjectWriter *m_pWriter;
 
   raw_ostream &OS;
 
@@ -791,7 +791,14 @@ public:
 
   MCCodeEmitter &getEmitter() const { return Emitter; }
 
-  MCObjectWriter &getWriter() const { return Writer; }
+  MCObjectWriter &getWriter() const { return *m_pWriter; }
+  void setWriter(MCObjectWriter &pObjectWriter) {
+    if (&(*m_pWriter) == &pObjectWriter) {
+      return;
+    }
+    delete m_pWriter;
+    m_pWriter = &pObjectWriter;
+  }
 
   /// Finish - Do final processing and write the object to the output stream.
   /// \arg Writer is used for custom object writer (as the MCJIT does),
